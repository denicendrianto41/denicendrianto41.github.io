<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8"/>
    <title>Simulasi Praktikum: Deteksi Gula dalam Urine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f9ff;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .draggable-container {
            position: relative;
            height: 500px;
            background-color: #f8fafc;
            border-radius: 12px;
            overflow: hidden;
            background: linear-gradient(to bottom, #e0f2fe, #f0f9ff);
            border: 1px solid #cbd5e1;
            margin-top: 1rem;
        }
        
        .test-tube {
            touch-action: none;
            pointer-events: all;
            position: absolute;
            width: 60px;
            height: 180px;
            background: linear-gradient(to bottom, #e2e8f0, #f8fafc);
            border: 2px solid #94a3b8;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            z-index: 10;
        }
        
        .test-tube-liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0;
            border-bottom-left-radius: 18px;
            border-bottom-right-radius: 18px;
            transition: all 0.5s;
        }
        
        .dropper {
            touch-action: none;
            pointer-events: all;
            position: absolute;
            width: 60px;
            height: 120px;
            z-index: 5;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .dropper:active {
            transform: scale(0.95);
        }
        
        .dropper-liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60px;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }
        
        .burner {
            touch-action: none;
            pointer-events: all;
            width: 120px;
            height: 140px;
            z-index: 5;
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .flame {
            position: absolute;
            width: 40px;
            height: 0;
            background: linear-gradient(to top, #f97316, #fbbf24);
            border-radius: 20px 20px 0 0;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            transition: height 0.3s;
            z-index: 6;
        }
        
        .burner-knob {
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: #94a3b8;
            border-radius: 50%;
            cursor: pointer;
            bottom: 30px;
            left: 60px;
            z-index: 7;
            transition: transform 0.2s;
        }
        
        .burner-knob:active {
            transform: rotate(30deg);
        }
        
        .info-icon {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            z-index: 20;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
        }
        
        .label {
            pointer-events: none;
            font-weight: 600;
            text-shadow: 0 0 2px #fff;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 0.75rem;
            color: #334155;
            margin-top: 5px;
        }
        
        #burner .label {
            color: #f8fafc !important;
            text-shadow: 0 0 4px #000;
            top: 110%;
        }
        
        .drop {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            z-index: 15;
            pointer-events: none;
            animation: dropFall 0.8s ease-out forwards;
        }
        
        @keyframes dropFall {
            0% { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            70% {
                opacity: 0.8;
            }
            100% { 
                transform: translateY(80px) scale(0.8);
                opacity: 0;
            }
        }
        
        .simulation-container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin: 2rem auto;
            max-width: 900px;
        }
        
        .simulation-title {
            color: #1e40af;
            font-size: 1.875rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .control-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .control-group {
            flex: 1;
            min-width: 200px;
        }
        
        .control-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        .control-select {
            width: 100%;
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            color: #374151;
            background-color: white;
        }
        
        .reset-button {
            background-color: #3b82f6;
            color: white;
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 0.375rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            align-self: flex-end;
        }
        
        .reset-button:hover {
            background-color: #2563eb;
        }
        
        .status-text {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            right: 1rem;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 0.75rem;
            border-radius: 0.5rem;
            color: #374151;
            font-size: 0.875rem;
        }
        
        @media screen and (max-width: 768px) {
            .test-tube,
            .dropper,
            .burner {
                transform: scale(0.8);
                transform-origin: top left;
            }
            
            .control-panel {
                flex-direction: column;
            }
            
            .simulation-container {
                padding: 1rem;
                margin: 1rem;
            }
        }
        
        .instructions {
            background-color: #f0f9ff;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            border-left: 4px solid #3b82f6;
        }
        
        .instructions h3 {
            color: #1e40af;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }
        
        .instructions ol {
            margin: 0;
            padding-left: 1.5rem;
        }
        
        .instructions li {
            margin-bottom: 0.5rem;
        }
        
        .dropper.active {
            animation: squeeze 0.3s ease;
        }
        
        @keyframes squeeze {
            0% { transform: scale(1); }
            50% { transform: scale(0.95) translateY(5px); }
            100% { transform: scale(1); }
        }
        
        .flame.active {
            animation: flicker 0.3s infinite alternate;
        }
        
        @keyframes flicker {
            0% { opacity: 0.8; transform: translateX(-50%) scaleY(1); }
            100% { opacity: 1; transform: translateX(-50%) scaleY(1.1); }
        }
    </style>
</head>
<body>
    <div class="simulation-container">
        <h1 class="simulation-title">Simulasi Praktikum: Deteksi Gula dalam Urine</h1>
        
        <div class="control-panel">
            <div class="control-group">
                <label class="control-label" for="test-type">Pilih jenis tes:</label>
                <select class="control-select" id="test-type">
                    <option value="benedict">Uji Benedict</option>
                    <option value="fehling">Uji Fehling</option>
                </select>
            </div>
            
            <div class="control-group">
                <label class="control-label" for="glucose-level">Pilih kadar glukosa dalam sampel:</label>
                <select class="control-select" id="glucose-level">
                    <option value="none">Tidak ada glukosa</option>
                    <option value="low">Kadar glukosa rendah</option>
                    <option value="medium">Kadar glukosa sedang</option>
                    <option value="high">Kadar glukosa tinggi</option>
                    <option value="very-high">Kadar glukosa sangat tinggi</option>
                </select>
            </div>
            
            <button class="reset-button" id="reset-btn">Reset Simulasi</button>
        </div>
        
        <div class="instructions">
            <h3>Petunjuk Penggunaan:</h3>
            <ol>
                <li>Pilih jenis tes (Benedict atau Fehling) dan kadar glukosa</li>
                <li>Klik pipet tetes untuk meneteskan reagen (atau seret ke tabung reaksi)</li>
                <li>Klik kenop pada pembakar Bunsen untuk menyalakannya</li>
                <li>Seret tabung reaksi ke atas api untuk memanaskannya</li>
                <li>Klik ikon informasi (i) untuk melihat hasil pengamatan</li>
                <li>Gunakan tombol Reset untuk memulai ulang simulasi</li>
            </ol>
        </div>
        
        <div class="draggable-container" id="simulation-area">
            <!-- Test tube with urine -->
            <div class="test-tube" id="test-tube" style="top: 200px; left: 400px;">
                <div class="test-tube-liquid" id="urine-liquid" style="height: 60px; background-color: #fef08a;"></div>
                <div class="label">Tabung Reaksi</div>
            </div>
            
            <!-- Benedict dropper -->
            <div class="dropper lab-item" id="benedict-dropper" style="top: 100px; left: 100px; background-image: url('https://iili.io/Kl1Y5v9.md.png');">
                <div class="label">Pipet + Benedict</div>
            </div>
            
            <!-- Fehling A dropper -->
            <div class="dropper lab-item" id="fehling-a-dropper" style="top: 100px; left: 200px; display: none; background-image: url('https://iili.io/Kl1Y5v9.md.png');">
                <div class="label">Pipet + Fehling A</div>
            </div>
            
            <!-- Fehling B dropper -->
            <div class="dropper lab-item" id="fehling-b-dropper" style="top: 100px; left: 300px; display: none; background-image: url('https://iili.io/Kl1Y5v9.md.png');">
                <div class="label">Pipet + Fehling B</div>
            </div>
            
            <!-- Burner -->
            <div class="burner" id="burner" style="bottom: 50px; left: 600px; background-image: url('https://iili.io/K0iD4Wb.md.png');">
                <div class="flame" id="flame"></div>
                <div class="burner-knob" id="burner-knob"></div>
                <div class="label">Pembakar Bunsen</div>
            </div>
            
            <!-- Info icon -->
            <div class="info-icon" id="info-icon" style="top: 20px; right: 20px;">i</div>
            
            <!-- Status text -->
            <div class="status-text" id="status-text">
                Pilih jenis tes dan kadar glukosa, lalu mulai praktikum
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="modal" id="result-modal">
        <div class="modal-content">
            <h3 class="text-xl font-bold text-blue-800 mb-4">Hasil Pengamatan</h3>
            <div class="mb-6" id="result-content"></div>
            <div class="flex justify-end">
                <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700" id="close-modal">Tutup</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Simulation Logic
            const testType = document.getElementById('test-type');
            const glucoseLevel = document.getElementById('glucose-level');
            const testTube = document.getElementById('test-tube');
            const urineLiquid = document.getElementById('urine-liquid');
            const benedictDropper = document.getElementById('benedict-dropper');
            const fehlingADropper = document.getElementById('fehling-a-dropper');
            const fehlingBDropper = document.getElementById('fehling-b-dropper');
            const burner = document.getElementById('burner');
            const flame = document.getElementById('flame');
            const burnerKnob = document.getElementById('burner-knob');
            const infoIcon = document.getElementById('info-icon');
            const resetBtn = document.getElementById('reset-btn');
            const statusText = document.getElementById('status-text');
            const resultModal = document.getElementById('result-modal');
            const resultContent = document.getElementById('result-content');
            const closeModal = document.getElementById('close-modal');
            const simulationArea = document.getElementById('simulation-area');
            
            let simulationState = {
                testType: 'benedict',
                glucoseLevel: 'none',
                reagentAdded: false,
                heated: false,
                burnerOn: false,
                fehlingAAdded: false,
                fehlingBAdded: false
            };
            
            // Update display based on test type
            testType.addEventListener('change', () => {
                resetSimulation();
                if (testType.value === 'benedict') {
                    benedictDropper.style.display = 'block';
                    fehlingADropper.style.display = 'none';
                    fehlingBDropper.style.display = 'none';
                    statusText.textContent = 'Klik atau tarik penetes Benedict ke tabung reaksi';
                } else {
                    benedictDropper.style.display = 'none';
                    fehlingADropper.style.display = 'block';
                    fehlingBDropper.style.display = 'block';
                    statusText.textContent = 'Klik atau tarik penetes Fehling A ke tabung reaksi';
                }
                simulationState.testType = testType.value;
            });
            
            // Update glucose level
            glucoseLevel.addEventListener('change', () => {
                resetSimulation();
                simulationState.glucoseLevel = glucoseLevel.value;
            });
            
            // Create drop effect
            function createDrop(dropper, color) {
                const dropperRect = dropper.getBoundingClientRect();
                const containerRect = simulationArea.getBoundingClientRect();
                
                const drop = document.createElement('div');
                drop.className = 'drop';
                drop.style.backgroundColor = color;
                drop.style.left = (dropperRect.left - containerRect.left + dropperRect.width/2 - 6) + 'px';
                drop.style.top = (dropperRect.top - containerRect.top + dropperRect.height) + 'px';
                
                simulationArea.appendChild(drop);
                
                // Remove drop after animation completes
                setTimeout(() => {
                    if (drop.parentNode) {
                        drop.parentNode.removeChild(drop);
                    }
                }, 800);
            }
            
            // Add click event to droppers to create drops
            benedictDropper.addEventListener('click', function() {
                if (!simulationState.reagentAdded) {
                    createDrop(benedictDropper, '#3b82f6');
                    this.classList.add('active');
                    setTimeout(() => this.classList.remove('active'), 300);
                    
                    // Check if dropper is over test tube
                    const dropperRect = benedictDropper.getBoundingClientRect();
                    const testTubeRect = testTube.getBoundingClientRect();
                    
                    if (isOverlapping(dropperRect, testTubeRect)) {
                        addBenedict();
                    }
                }
            });
            
            fehlingADropper.addEventListener('click', function() {
                if (!simulationState.fehlingAAdded) {
                    createDrop(fehlingADropper, '#2563eb');
                    this.classList.add('active');
                    setTimeout(() => this.classList.remove('active'), 300);
                    
                    // Check if dropper is over test tube
                    const dropperRect = fehlingADropper.getBoundingClientRect();
                    const testTubeRect = testTube.getBoundingClientRect();
                    
                    if (isOverlapping(dropperRect, testTubeRect)) {
                        addFehlingA();
                    }
                }
            });
            
            fehlingBDropper.addEventListener('click', function() {
                if (simulationState.fehlingAAdded && !simulationState.fehlingBAdded) {
                    createDrop(fehlingBDropper, '#4ade80');
                    this.classList.add('active');
                    setTimeout(() => this.classList.remove('active'), 300);
                    
                    // Check if dropper is over test tube
                    const dropperRect = fehlingBDropper.getBoundingClientRect();
                    const testTubeRect = testTube.getBoundingClientRect();
                    
                    if (isOverlapping(dropperRect, testTubeRect)) {
                        addFehlingB();
                    }
                }
            });
            
            // Make elements draggable
            function makeDraggable(element) {
                let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                
                element.onmousedown = dragMouseDown;
                
                function dragMouseDown(e) {
                    e.preventDefault();
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    document.onmouseup = closeDragElement;
                    document.onmousemove = elementDrag;
                }
                
                function elementDrag(e) {
                    e.preventDefault();
                    pos1 = pos3 - e.clientX;
                    pos2 = pos4 - e.clientY;
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    
                    const container = document.querySelector('.draggable-container');
                    const containerRect = container.getBoundingClientRect();
                    
                    const newTop = element.offsetTop - pos2;
                    const newLeft = element.offsetLeft - pos1;
                    
                    // Keep element within container bounds
                    if (newTop >= 0 && newTop + element.offsetHeight <= containerRect.height) {
                        element.style.top = newTop + "px";
                    }
                    
                    if (newLeft >= 0 && newLeft + element.offsetWidth <= containerRect.width) {
                        element.style.left = newLeft + "px";
                    }
                    
                    // Check for interactions
                    checkInteractions(element);
                }
                
                function closeDragElement() {
                    document.onmouseup = null;
                    document.onmousemove = null;
                }
            }
            
            // Make elements draggable
            makeDraggable(testTube);
            makeDraggable(burner);
            makeDraggable(benedictDropper);
            makeDraggable(fehlingADropper);
            makeDraggable(fehlingBDropper);
            
            // Check for interactions between elements
            function checkInteractions(element) {
                const testTubeRect = testTube.getBoundingClientRect();
                const elementRect = element.getBoundingClientRect();
                
                // Check if dropper is over test tube
                if (element === benedictDropper && !simulationState.reagentAdded) {
                    if (isOverlapping(elementRect, testTubeRect)) {
                        addBenedict();
                    }
                }
                
                if (element === fehlingADropper && !simulationState.fehlingAAdded) {
                    if (isOverlapping(elementRect, testTubeRect)) {
                        addFehlingA();
                    }
                }
                
                if (element === fehlingBDropper && simulationState.fehlingAAdded && !simulationState.fehlingBAdded) {
                    if (isOverlapping(elementRect, testTubeRect)) {
                        addFehlingB();
                    }
                }
                
                // Check if test tube is over burner
                if (element === testTube && simulationState.burnerOn && !simulationState.heated) {
                    const burnerRect = burner.getBoundingClientRect();
                    const flameRect = flame.getBoundingClientRect();
                    
                    if (isOverlapping(testTubeRect, flameRect)) {
                        heatTestTube();
                    }
                }
            }
            
            // Check if two elements are overlapping
            function isOverlapping(rect1, rect2) {
                return !(rect1.right < rect2.left || 
                        rect1.left > rect2.right || 
                        rect1.bottom < rect2.top || 
                        rect1.top > rect2.bottom);
            }
            
            // Add Benedict reagent to test tube
            function addBenedict() {
                urineLiquid.style.backgroundColor = '#93c5fd'; // Light blue
                urineLiquid.style.height = '120px';
                simulationState.reagentAdded = true;
                statusText.textContent = 'Nyalakan pembakar dengan mengklik kenop';
                
                // Create multiple drops for visual effect
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => createDrop(benedictDropper, '#3b82f6'), i * 200);
                }
            }
            
            // Add Fehling A reagent to test tube
            function addFehlingA() {
                urineLiquid.style.backgroundColor = '#93c5fd'; // Light blue
                urineLiquid.style.height = '90px';
                simulationState.fehlingAAdded = true;
                statusText.textContent = 'Tarik penetes Fehling B ke tabung reaksi';
                
                // Create multiple drops for visual effect
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => createDrop(fehlingADropper, '#2563eb'), i * 200);
                }
            }
            
            // Add Fehling B reagent to test tube
            function addFehlingB() {
                urineLiquid.style.backgroundColor = '#60a5fa'; // Medium blue
                urineLiquid.style.height = '120px';
                simulationState.fehlingBAdded = true;
                simulationState.reagentAdded = true;
                statusText.textContent = 'Nyalakan pembakar dengan mengklik kenop';
                
                // Create multiple drops for visual effect
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => createDrop(fehlingBDropper, '#4ade80'), i * 200);
                }
            }
            
            // Toggle burner on/off
            burnerKnob.addEventListener('click', () => {
                if (!simulationState.burnerOn) {
                    flame.style.height = '60px';
                    flame.classList.add('active');
                    simulationState.burnerOn = true;
                    statusText.textContent = 'Tarik tabung reaksi ke atas pembakar';
                } else {
                    flame.style.height = '0';
                    flame.classList.remove('active');
                    simulationState.burnerOn = false;
                    statusText.textContent = 'Nyalakan pembakar dengan mengklik kenop';
                }
            });
            
            // Heat test tube
            function heatTestTube() {
                // Validasi: pastikan semua langkah sudah dilakukan
                if (!simulationState.reagentAdded) {
                    statusText.textContent = 'Tambahkan pereaksi terlebih dahulu sebelum memanaskan.';
                    return;
                }

                if (!simulationState.burnerOn) {
                    statusText.textContent = 'Nyalakan pembakar terlebih dahulu sebelum memanaskan.';
                    return;
                }

                if (simulationState.testType === 'fehling' && (!simulationState.fehlingAAdded || !simulationState.fehlingBAdded)) {
                    statusText.textContent = 'Tambahkan Fehling A dan B sebelum memanaskan.';
                    return;
                }

                simulationState.heated = true;
                
                // Change color based on glucose level
                let finalColor;
                let resultText;
                
                if (simulationState.glucoseLevel === 'none') {
                    finalColor = '#93c5fd'; // Blue - negative
                    resultText = '<p class="mb-4">Hasil pengujian menunjukkan <strong class="text-blue-600">negatif</strong> untuk glukosa dalam urine.</p>' +
                                '<p>Warna larutan tetap biru, yang menandakan tidak ada glukosa dalam sampel urine.</p>';
                } else if (simulationState.glucoseLevel === 'low') {
                    finalColor = '#86efac'; // Green - trace
                    resultText = '<p class="mb-4">Hasil pengujian menunjukkan <strong class="text-green-600">positif (+)</strong> untuk glukosa dalam urine.</p>' +
                                '<p>Terbentuk endapan hijau, yang menandakan adanya sedikit glukosa dalam sampel urine.</p>';
                } else if (simulationState.glucoseLevel === 'medium') {
                    finalColor = '#fde047'; // Yellow - moderate
                    resultText = '<p class="mb-4">Hasil pengujian menunjukkan <strong class="text-yellow-600">positif (++)</strong> untuk glukosa dalam urine.</p>' +
                                '<p>Terbentuk endapan kuning, yang menandakan adanya glukosa dengan kadar sedang dalam sampel urine.</p>';
                } else if (simulationState.glucoseLevel === 'high') {
                    finalColor = '#fb923c'; // Orange - high
                    resultText = '<p class="mb-4">Hasil pengujian menunjukkan <strong class="text-orange-600">positif (+++)</strong> untuk glukosa dalam urine.</p>' +
                                '<p>Terbentuk endapan oranye, yang menandakan adanya glukosa dengan kadar tinggi dalam sampel urine.</p>';
                } else if (simulationState.glucoseLevel === 'very-high') {
                    finalColor = '#ef4444'; // Red - very high
                    resultText = '<p class="mb-4">Hasil pengujian menunjukkan <strong class="text-red-600">positif (++++)</strong> untuk glukosa dalam urine.</p>' +
                                '<p>Terbentuk endapan merah bata, yang menandakan adanya glukosa dengan kadar sangat tinggi dalam sampel urine.</p>';
                }
                
                // Animate color change
                let startTime = null;
                const duration = 2000; // 2 seconds
                const startColor = hexToRgb('#60a5fa');
                const endColor = hexToRgb(finalColor);
                
                function animateColor(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const elapsed = timestamp - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    const r = Math.round(startColor.r + (endColor.r - startColor.r) * progress);
                    const g = Math.round(startColor.g + (endColor.g - startColor.g) * progress);
                    const b = Math.round(startColor.b + (endColor.b - startColor.b) * progress);
                    
                    urineLiquid.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animateColor);
                    } else {
                        statusText.textContent = 'Klik ikon informasi untuk melihat hasil';
                    }
                }
                
                requestAnimationFrame(animateColor);
                
                // Store result for info icon
                simulationState.resultText = resultText;
            }
            
            // Helper function to convert hex to RGB
            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : null;
            }
            
            // Show result when info icon is clicked
            infoIcon.addEventListener('click', () => {
                if (simulationState.heated) {
                    resultContent.innerHTML = simulationState.resultText;
                    resultModal.style.display = 'flex';
                } else {
                    alert('Selesaikan praktikum terlebih dahulu untuk melihat hasil.');
                }
            });
            
            // Close modal
            closeModal.addEventListener('click', () => {
                resultModal.style.display = 'none';
            });
            
            // Reset simulation
            resetBtn.addEventListener('click', resetSimulation);
            
            function resetSimulation() {
                resultModal.style.display = 'none';
                urineLiquid.style.backgroundColor = '#fef08a'; // Yellow (urine color)
                urineLiquid.style.height = '60px';
                flame.style.height = '0';
                flame.classList.remove('active');
                
                benedictDropper.style.top = '100px';
                benedictDropper.style.left = '100px';
                
                fehlingADropper.style.top = '100px';
                fehlingADropper.style.left = '200px';
                
                fehlingBDropper.style.top = '100px';
                fehlingBDropper.style.left = '300px';
                
                testTube.style.top = '200px';
                testTube.style.left = '400px';
                
                burner.style.bottom = '50px';
                burner.style.left = '600px';
                
                simulationState = {
                    testType: testType.value,
                    glucoseLevel: glucoseLevel.value,
                    reagentAdded: false,
                    heated: false,
                    burnerOn: false,
                    fehlingAAdded: false,
                    fehlingBAdded: false
                };
                
                if (testType.value === 'benedict') {
                    statusText.textContent = 'Klik atau tarik penetes Benedict ke tabung reaksi';
                } else {
                    statusText.textContent = 'Klik atau tarik penetes Fehling A ke tabung reaksi';
                }
            }
        });
    </script>
</body>
</html>